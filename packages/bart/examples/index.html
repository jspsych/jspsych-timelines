<!DOCTYPE html>
<html>

<head>
  <title>jsPsychTimelineBart Example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://unpkg.com/jspsych"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response"></script>
  <script src="../dist/index.global.js"></script>
  <script src=""jatos.js"></script>
  <!-- Load the published timeline package here, e.g.
<script src="https://unpkg.com/bart"></script>
<script src="../dist/index.global.js"></script> -->
  <link rel="stylesheet" href="https://unpkg.com/jspsych/css/jspsych.css">
<link rel="stylesheet" href="styles.css">

</head>

<body></body>
<script>
  const jsPsych = initJsPsych({
    on_finish:() => jsPsych.data.displayData('json'),
    on_finish: () => jatos.startNextComponent(jsPsych.data.get().json()),
  });

  // Get instructions trial
//const instructions = timelineUnits.showStartInstructions();

  // Example with USD currency (default)
  const task = jsPsychTimelineBart.createTimeline(jsPsych, {
    max_pumps: 20,
    min_pumps: 1,
    currency_unit_per_pump: 1, //eg 1 cent per pump
    currency_config: jsPsychTimelineBart.CURRENCY_PRESETS.USD, // USD currency
    num_blocks: 3, // number of blocks in the experiment
    trials_per_block: 10, // number of trials per block
    trial_timeout: 15000, // 15 seconds timeout per trial (default)
    enable_timeout: true, // enable auto timeout (default)
   });

   // Example with EUR currency
   /*
   const task = jsPsychTimelineBart.createTimeline(jsPsych, {
    max_pumps: 20,
    min_pumps: 1,
    currency_unit_per_pump: 1, //eg 1 cent per pump
    currency_config: jsPsychTimelineBart.CURRENCY_PRESETS.EUR, // Euro currency
    num_blocks: 3,
    trials_per_block: 10,
    trial_timeout: 15000,
    enable_timeout: true,
   });
   */

   // Example with JPY currency (no decimals)
   /*
   const task = jsPsychTimelineBart.createTimeline(jsPsych, {
    max_pumps: 20,
    min_pumps: 1,
    currency_unit_per_pump: 1, //eg 1 yen per pump
    currency_config: jsPsychTimelineBart.CURRENCY_PRESETS.JPY, // Japanese Yen
    num_blocks: 3,
    trials_per_block: 10,
    trial_timeout: 15000,
    enable_timeout: true,
   });
   */

   // Create currency formatter for consistent formatting across all screens
   const currencyFormatter = new jsPsychTimelineBart.CurrencyFormatter(jsPsychTimelineBart.CURRENCY_PRESETS.USD);
   
   const instructions = jsPsychTimelineBart.timelineUnits.showStartInstructions(currencyFormatter, 1);

   const end = jsPsychTimelineBart.timelineUnits.showEndResults(jsPsych, currencyFormatter);

   const timeline = [instructions, task, end];

  jsPsych.run(timeline);

  jatos.onLoad(() => {
    jsPsych.run(timeline);
  });
</script>

</html>